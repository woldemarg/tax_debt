## Анализ налогового долга

#### Описание проблемы
ДФС предоставляет исходные данные по налоговой задолженности в виде [реестра должников](http://data.gov.ua/passport/ae5a5a6e-f13e-44bf-89a3-fe71d90ab0a0), в котором представлена информация о наименовании предприятия, налоговой инспекции и сумме задолженности.

Для проведения даже простого анализа этих данных необходимо идентифицировать должников (найти дополнительные сведения о них в [ЕГРПОУ](http://data.gov.ua/passport/73cfe78e-89ef-4f06-b3ab-eb5f16aea237)). Это даст возможность рассматривать долг в разрезе действующих/ликвидированных предприятий, увидеть распределение должников по видам деятельности, рассчитать индекс налоговой дисциплины и т.д.
>**Индекс налоговой дисциплины** - отношение количества действующих должников к общему количеству действующих предприятий в регионе.

#### Алгоритм идентификации
Идентификация должников-юрлиц происходила на основе сопоставления наименования и региона регистрации предприятия из реестра ДФС с записями в ЕГРПОУ. При сопоставлении двух реестров необходимо принять во внимание, что **предприятия могут иметь одинаковые наименования**. Для уменьшения риска ошибочной идентификации из списков сопоставления исключались предприятия с идентичными названиями внутри региона. Подробнее эта и другие особенности идентификации описаны в комментариях к папке [scripts](https://github.com/woldemarg/tax_debt/tree/master/scripts), а также прямо в комментариях внутри файлов с кодом.

##### Процесс идентификации юрлиц ([увеличить картинку](https://www.draw.io/?lightbox=1&target=blank&highlight=FFFFFF&nav=1&title=tax_debt.html#Uhttps%3A%2F%2Fdrive.google.com%2Fuc%3Fid%3D0B5bT-h9e6mOJcF9nOGpmWlRYMm8%26export%3Ddownload))
![Схема](https://raw.githubusercontent.com/woldemarg/tax_debt/master/chart.png "Идентификация налоговых должников")

Не идентифицированными остались ок. 10% должников.

#### Описание папок в репозитории
* **data_main** - исходные данные для анализа
* **data_sppl** - дополнительные БД
* **funcs** - вспомогательные функции чтения данных
* **scripts** - основные аналитические скрипты
* **data_calc** - результаты обработки данных, идентификации и расчетов

#### Библиотеки R
При поиске дубликатов наименований предприятий по регионам и последующем сопоставлении списков вычисления производились параллельно. В скриптах использованы такие библиотеки ```R```:
``` R
library(readr) #чтение csv-файлов
library(dplyr) #трансформация данных
library(foreach) #параллельные вычисления при идентификации
library(doParallel) #параллельные вычисления при идентификации
library(forcats) #преобразование и работа с факторами
library(stringr) #работа со строками
```

#### Что дальше?
Из базы должников сейчас нельзя выделить предприятия из ОРДЛО. В теории можно попробовать составить список почтовых идексов ОРДЛО, а затем по индексам исключать предприятия из анализа. Список населенных пунктов ОРДЛО [на Википедии](https://uk.wikipedia.org/wiki/%D0%9E%D0%BA%D1%80%D0%B5%D0%BC%D1%96_%D1%80%D0%B0%D0%B9%D0%BE%D0%BD%D0%B8_%D0%94%D0%BE%D0%BD%D0%B5%D1%86%D1%8C%D0%BA%D0%BE%D1%97_%D1%82%D0%B0_%D0%9B%D1%83%D0%B3%D0%B0%D0%BD%D1%81%D1%8C%D0%BA%D0%BE%D1%97_%D0%BE%D0%B1%D0%BB%D0%B0%D1%81%D1%82%D0%B5%D0%B9#.D0.A1.D0.BF.D0.B8.D1.81.D0.BE.D0.BA_.D0.BD.D0.B0.D1.81.D0.B5.D0.BB.D0.B5.D0.BD.D0.B8.D1.85_.D0.BF.D1.83.D0.BD.D0.BA.D1.82.D1.96.D0.B2).

#### Применение результатов анализа
В настоящее время на основе данных, полученых в результате идентификации, реализованы такие проекты:
* [интеравткивный реестр налоговых должников](http://cost.ua/special/dbregister/index.html)
